<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Quote Follow-up Report -->
    <record id="view_btp_quote_followup_tree" model="ir.ui.view">
        <field name="name">btp.quote.followup.tree</field>
        <field name="model">sale.order</field>
        <field name="arch" type="xml">
            <list string="Quote Follow-up" default_order="date_order desc">
                <field name="btp_quote_number"/>
                <field name="partner_id"/>
                <field name="user_id"/>
                <field name="btp_quote_status"/>
                <field name="date_order"/>
                <field name="btp_sent_date"/>
                <field name="btp_days_to_send"/>
                <field name="amount_total" sum="Total"/>
                <field name="btp_is_converted" widget="boolean_toggle"/>
                <field name="state"/>
            </list>
        </field>
    </record>

    <record id="view_btp_quote_followup_pivot" model="ir.ui.view">
        <field name="name">btp.quote.followup.pivot</field>
        <field name="model">sale.order</field>
        <field name="arch" type="xml">
            <pivot string="Quote Follow-up">
                <field name="btp_quote_status" type="col"/>
                <field name="user_id" type="row"/>
                <field name="id" type="measure"/>
            </pivot>
        </field>
    </record>

    <record id="view_btp_quote_followup_graph" model="ir.ui.view">
        <field name="name">btp.quote.followup.graph</field>
        <field name="model">sale.order</field>
        <field name="arch" type="xml">
            <graph string="Quote Follow-up" type="bar">
                <field name="btp_quote_status" type="row"/>
                <field name="id" type="measure"/>
            </graph>
        </field>
    </record>

    <record id="action_btp_quote_followup" model="ir.actions.act_window">
        <field name="name">Quote Follow-up</field>
        <field name="res_model">sale.order</field>
        <field name="view_mode">list,pivot,graph</field>
        <field name="domain">[('btp_quote_number', '!=', False)]</field>
        <field name="context">{'search_default_group_by_user': 1, 'search_default_group_by_status': 1}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                No quotes found!
            </p>
            <p>
                Track quote creation, sending, acceptance, and refusal rates by salesperson.
            </p>
        </field>
    </record>

    <!-- Article Analysis Report -->
    <record id="view_btp_article_analysis_tree" model="ir.ui.view">
        <field name="name">btp.article.analysis.tree</field>
        <field name="model">btp.quote.item.article</field>
        <field name="arch" type="xml">
            <list string="Article Analysis">
                <field name="article_id"/>
                <field name="item_id"/>
                <field name="quantity"/>
                <field name="unit_cost"/>
                <field name="total_cost"/>
            </list>
        </field>
    </record>

    <record id="view_btp_article_analysis_pivot" model="ir.ui.view">
        <field name="name">btp.article.analysis.pivot</field>
        <field name="model">btp.quote.item.article</field>
        <field name="arch" type="xml">
            <pivot string="Article Analysis">
                <field name="article_id" type="row"/>
                <field name="quantity" type="measure"/>
                <field name="total_cost" type="measure"/>
            </pivot>
        </field>
    </record>

    <record id="view_btp_article_analysis_graph" model="ir.ui.view">
        <field name="name">btp.article.analysis.graph</field>
        <field name="model">btp.quote.item.article</field>
        <field name="arch" type="xml">
            <graph string="Most Used Articles" type="bar">
                <field name="article_id" type="row"/>
                <field name="quantity" type="measure"/>
            </graph>
        </field>
    </record>

    <record id="action_btp_article_analysis" model="ir.actions.act_window">
        <field name="name">Article Analysis</field>
        <field name="res_model">btp.quote.item.article</field>
        <field name="view_mode">list,pivot,graph</field>
        <field name="context">{'search_default_group_by_article': 1}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                No article usage found!
            </p>
            <p>
                Analyze which articles are most used in quotes and their average margins.
            </p>
        </field>
    </record>

    <!-- Supplier Analysis Report -->
    <record id="view_btp_supplier_analysis_tree" model="ir.ui.view">
        <field name="name">btp.supplier.analysis.tree</field>
        <field name="model">btp.article.price.history</field>
        <field name="arch" type="xml">
            <list string="Supplier Analysis">
                <field name="article_id"/>
                <field name="supplier_id"/>
                <field name="purchase_date"/>
                <field name="purchase_price"/>
                <field name="quantity"/>
                <field name="currency_id"/>
            </list>
        </field>
    </record>

    <record id="view_btp_supplier_analysis_pivot" model="ir.ui.view">
        <field name="name">btp.supplier.analysis.pivot</field>
        <field name="model">btp.article.price.history</field>
        <field name="arch" type="xml">
            <pivot string="Supplier Price Comparison">
                <field name="supplier_id" type="row"/>
                <field name="article_id" type="col"/>
                <field name="purchase_price" type="measure"/>
            </pivot>
        </field>
    </record>

    <record id="view_btp_supplier_analysis_graph" model="ir.ui.view">
        <field name="name">btp.supplier.analysis.graph</field>
        <field name="model">btp.article.price.history</field>
        <field name="arch" type="xml">
            <graph string="Supplier Price Comparison" type="line">
                <field name="purchase_date" type="row"/>
                <field name="supplier_id" type="groupby"/>
                <field name="purchase_price" type="measure"/>
            </graph>
        </field>
    </record>

    <record id="action_btp_supplier_analysis" model="ir.actions.act_window">
        <field name="name">Supplier Analysis</field>
        <field name="res_model">btp.article.price.history</field>
        <field name="view_mode">list,pivot,graph</field>
        <field name="context">{'search_default_group_by_supplier': 1, 'search_default_group_by_article': 1}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                No purchase history found!
            </p>
            <p>
                Compare purchase prices by supplier to identify the best deals.
            </p>
        </field>
    </record>

    <!-- Price Fluctuation Report -->
    <record id="view_btp_price_fluctuation_list" model="ir.ui.view">
        <field name="name">btp.article.price.stats.list</field>
        <field name="model">btp.article.price.stats</field>
        <field name="arch" type="xml">
            <list string="Price Fluctuations">
                <field name="article_id"/>
                <field name="supplier_id"/>
                <field name="month"/>
                <field name="avg_price"/>
                <field name="min_price"/>
                <field name="max_price"/>
                <field name="purchase_count"/>
            </list>
        </field>
    </record>

    <record id="view_btp_price_fluctuation_pivot" model="ir.ui.view">
        <field name="name">btp.article.price.stats.pivot</field>
        <field name="model">btp.article.price.stats</field>
        <field name="arch" type="xml">
            <pivot string="Price Fluctuations">
                <field name="month" type="row"/>
                <field name="article_id" type="col"/>
                <field name="avg_price" type="measure"/>
            </pivot>
        </field>
    </record>

    <record id="view_btp_price_fluctuation_graph" model="ir.ui.view">
        <field name="name">btp.article.price.stats.graph</field>
        <field name="model">btp.article.price.stats</field>
        <field name="arch" type="xml">
            <graph string="Average Price Over Time" type="line">
                <field name="month" type="row"/>
                <field name="article_id" type="groupby"/>
                <field name="avg_price" type="measure"/>
            </graph>
        </field>
    </record>

    <record id="action_btp_price_fluctuation" model="ir.actions.act_window">
        <field name="name">Price Fluctuations</field>
        <field name="res_model">btp.article.price.stats</field>
        <field name="view_mode">list,pivot,graph</field>
        <field name="context">{'search_default_group_by_article': 1}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                No price history found!
            </p>
            <p>
                Track monthly price fluctuations by article and supplier.
            </p>
        </field>
    </record>

</odoo>

